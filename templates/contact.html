{% extends 'base.html' %}
{% load static %}

{% block title %}Twil Tex - Contact{% endblock %}

{% block meta_description %}Get in touch for bulk textile supply and industrial procurement. Our experts provide corporate textile solutions and B2B sourcing from Pakistan.{% endblock %}

{% block meta_keywords %}bulk textile suppliers, wholesale fabric manufacturers, industrial textile procurement, B2B textile sourcing, corporate textile solutions{% endblock %}

{% block content %}
    <!-- Header -->
    <div class="container text-center py-5 mt-5">
        <span class="text-gold text-uppercase tracking-wider small fw-bold">Contact Us</span>
        <h1 class="display-3 fw-light mb-4 text-white">Get In Touch</h1>
        <p class="lead text-muted mx-auto" style="max-width: 600px;">
            We'd love to hear from you. Whether you have a question about our services or need a quote.
        </p>
    </div>

    <!-- Contact Form & Info -->
    <section class="pb-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-7">
                    <div class="glass-panel p-5 h-100">
                        <h4 class="text-white mb-4 fw-light">Send us a Message</h4>

                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show mb-4 glass-panel" role="alert" style="border-radius: 12px; border-color: rgba(255, 215, 0, 0.4);">
                                    <span class="text-white">{{ message }}</span>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>
                            {% endfor %}
                        {% endif %}

                        <form id="contactForm" method="POST" action="{% url 'main:contact' %}">
                            {% csrf_token %}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="floatingFirstName" name="first_name" placeholder="John" required value="{{ first_name|default:'' }}">
                                        <label for="floatingFirstName" class="text-muted">First Name</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" id="floatingLastName" name="last_name" placeholder="Doe" required value="{{ last_name|default:'' }}">
                                        <label for="floatingLastName" class="text-muted">Last Name</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <input type="email" class="form-control" id="floatingEmail" name="email" placeholder="name@example.com" value="{{ email|default:'' }}">
                                        <label for="floatingEmail" class="text-muted">Email Address</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group mb-3 h-100">
                                        <div class="position-relative" style="width: 35%;">
                                            <div class="custom-select-wrapper" id="countryCodeWrapper">
                                                 <input type="hidden" id="selectedCountryCode" name="country_code" value="+92">
                                                 <button type="button" class="btn-custom-select form-control d-flex align-items-center justify-content-between" style="height: 58px;">
                                                    <span id="codeDisplay">ðŸ‡µðŸ‡° +92</span>
                                                    <i class="fas fa-chevron-down small"></i>
                                                 </button>
                                                 <!-- Dropdown injected by JS -->
                                            </div>
                                        </div>
                                        <div class="form-floating" style="width: 65%;">
                                            <input type="tel" class="form-control" id="floatingPhone" name="phone" placeholder="300 1234567" value="{{ phone|default:'' }}">
                                            <label for="floatingPhone" class="text-muted">Mobile No</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-floating mb-3">
                                        <select class="form-select" id="floatingSelect" name="subject">
                                            <option value="General Inquiry" {% if subject == 'General Inquiry' %}selected{% endif %} class="text-dark">General Inquiry</option>
                                            <option value="Sales & Quotes" {% if subject == 'Sales & Quotes' %}selected{% endif %} class="text-dark">Sales & Quotes</option>
                                            <option value="Support" {% if subject == 'Support' %}selected{% endif %} class="text-dark">Support</option>
                                            <option value="Careers" {% if subject == 'Careers' %}selected{% endif %} class="text-dark">Careers</option>
                                        </select>
                                        <label for="floatingSelect" class="text-muted">Subject</label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-floating mb-3">
                                        <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea" name="message" style="height: 150px;" required>{{ message|default:'' }}</textarea>
                                        <label for="floatingTextarea" class="text-muted">Message</label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="submit" id="sendMessageBtn" class="btn btn-primary-3d w-100">
                                        <span id="btnText">Send Message</span> 
                                        <i class="fas fa-paper-plane ms-2" id="btnIcon"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="glass-panel p-5 h-100">
                        <h4 class="text-white mb-4 fw-light">Contact Info</h4>
                        
                        <div class="d-flex align-items-start mb-4">
                            <i class="fas fa-map-marker-alt fa-2x me-3 text-gold"></i>
                            <div>
                                <h5 class="mb-1 fw-bold text-white">Headquarters</h5>
                                <p class="text-muted mb-0">Khurrianwala<br></p>
                            </div>
                        </div>

                        <div class="d-flex align-items-start mb-4">
                            <i class="fas fa-phone fa-2x me-3 text-gold"></i>
                            <div>
                                <h5 class="mb-1 fw-bold text-white">Phone</h5>
                                <p class="text-muted mb-0">+92 307 7970301</p>
                            </div>
                        </div>

                        <div class="d-flex align-items-start mb-4">
                            <i class="fas fa-envelope fa-2x me-3 text-gold"></i>
                            <div>
                                <h5 class="mb-1 fw-bold text-white">Email</h5>
                                <p class="text-muted mb-0">info@twiltex.com</p>
                            </div>
                        </div>

                        <hr class="border-secondary my-4">

                        <h5 class="mb-3 fw-normal text-white">Our Location</h5>
                        <!-- Google Map Embed for Faisalabad, Pakistan -->
                        <div class="rounded-3 overflow-hidden border border-secondary" style="height: 250px;">
                            <iframe 
                                src="https://maps.google.com/maps?width=600&height=400&hl=en&q=khurrianwala&t=&z=12&ie=UTF8&iwloc=B&output=embed" 
                                width="100%" 
                                height="100%" 
                                style="border:0;" 
                                allowfullscreen="" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
